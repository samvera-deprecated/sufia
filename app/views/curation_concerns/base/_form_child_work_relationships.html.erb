<div class="form-group multi_value optional managed">
  <%= link_to "Attach New Work", polymorphic_path([main_app, :new, :curation_concerns, :parent, curation_concern.model_name.singular], parent_id: params[:id]), target: "_blank", class: 'btn btn-primary' %>

  <table class="table table-striped related-files">
    <thead>
      <tr>
        <th>Child Work</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% curation_concern.members.select{|k| k.class.to_s != "FileSet" }.each do |member| %>
        <tr>
          <td>
            <%= link_to "#{member.title.first}", polymorphic_path([main_app, :curation_concerns, curation_concern.model_name.singular], id: member.id) %>
            <input class="string multi_value optional form-control related_works_ids generic_work_child_members_ids form-control multi-text-field hidden" value="<%= member.id %>" id="generic_work_child_members_ids" aria-labelledby="generic_work_child_members_ids_label" type="text">
          </td>
          <td>
            <div class="child-actions">
              <%= link_to "Edit", edit_polymorphic_path([main_app, :curation_concerns, curation_concern.model_name.singular], id: member.id), target: "_blank", class: 'btn btn-default' %>
              <a class="btn btn-danger btn-remove-row"
                 data-api-url=<%="/api/generic_works/:id/remove_parent/#{params[:id]}"%>
               data-api-call="apiCall"
               data-api-success="apiRemoveChildSuccess"
               data-api-error="apiRemoveChildError">Remove</a>
            </div>
          </td>
        </tr>
      <% end %>
      <tr class="new-row">
        <td>
          <a href="" class="title hidden"></a>
          <input class="new-form-control string multi_value optional related_works_ids generic_work_child_members_ids form-control multi-text-field" value="" id="generic_work_child_members_ids" aria-labelledby="generic_work_child_members_ids_label" type="text">
          <div class="message has-warning hidden"><%= t('simple_form.labels.in_works_ids.empty') %></div>
        </td>
        <td>
          <div class="child-actions">
            <a href="" class="edit hidden btn btn-default" target="_blank">Edit</a>
            <a class="btn btn-danger btn-remove-row hidden"
               data-api-url=<%="/api/generic_works/:id/remove_parent/#{params[:id]}"%>
             data-api-call="apiCall"
             data-api-success="apiRemoveChildSuccess"
             data-api-error="apiRemoveChildError">Remove</a>
            <a class="btn btn-primary btn-add-row"
               data-api-url=<%="/api/generic_works/:id/add_parent/#{params[:id]}"%>
             data-api-call="apiCall"
             data-api-success="apiAddChildSuccess"
             data-api-error="apiAddChildError">Add</a>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
