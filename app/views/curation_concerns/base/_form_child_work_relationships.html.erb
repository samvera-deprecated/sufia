<%# Form UI behavior code and details;
Code:
  app/assets/javascripts/sufia/relationships_table.es6
CSS:
  table.relationships-api-enabled : Used by sufia JS app as selector to wire up the UI functionality
  tr.new-row : The basic template row for cloning when user clicks "Add"
  .btn-remove-row : Button to remove its parent TR from the table
  .btn-add-row : Button to clone its parent TR and inject a new row into the table
  input.new-form-control : Input field for client client side validation and additional features
    .message.has-warning : Used to display UI errors related to input values and server errors
HTML Properties:
  table:
    data-api-add-url : API url to call for adding a new row to this table
    data-api-remove-url : API url to call for removing a row from this table
    data-works-context : (parent|child)
      this relates to the JSON returned from the server when successfully adding a new row.
      See example API return:
      {
        "parent": {
          "title":["dfdf"],
          "path":"/concern/generic_works/9306sz37r",
          "id":"9306sz37r"
        },
        "child": {
          "title":["asdf"],
          "path":"/concern/generic_works/2b88qc32v",
          "id":"2b88qc32v"
        }
      }
%>
<div class="form-group multi_value optional managed">
  <%= link_to "Attach New Work", polymorphic_path([main_app, :new, :curation_concerns, :parent, curation_concern.model_name.singular], parent_id: params[:id]), target: "_blank", class: 'btn btn-primary' %>

  <table class="table table-striped related-files relationships-api-enabled"
         data-api-add-url=<%="/api/generic_works/:id/add_parent/#{params[:id]}"%>
         data-api-remove-url=<%="/api/generic_works/:id/remove_parent/#{params[:id]}"%>
         data-works-context="child">
       <thead>
         <tr>
           <th>Child Work</th>
           <th>Actions</th>
         </tr>
       </thead>
       <tbody>
         <% curation_concern.members.select{|k| k.class.to_s != "FileSet" }.each do |member| %>
           <tr>
             <td>
               <%= link_to "#{member.title.first}", polymorphic_path([main_app, :curation_concerns, curation_concern.model_name.singular], id: member.id) %>
               <input class="string multi_value optional form-control related_works_ids generic_work_child_members_ids form-control multi-text-field hidden" value="<%= member.id %>" id="generic_work_child_members_ids" aria-labelledby="generic_work_child_members_ids_label" type="text">
             </td>
             <td>
               <div class="child-actions">
                 <%= link_to "Edit", edit_polymorphic_path([main_app, :curation_concerns, curation_concern.model_name.singular], id: member.id), target: "_blank", class: 'btn btn-default' %>
                 <a class="btn btn-danger btn-remove-row">Remove</a>
               </div>
             </td>
           </tr>
         <% end %>
         <tr class="new-row">
           <td>
             <a href="" class="title hidden"></a>
             <input class="new-form-control string multi_value optional related_works_ids generic_work_child_members_ids form-control multi-text-field" value="" id="generic_work_child_members_ids" aria-labelledby="generic_work_child_members_ids_label" type="text">
             <div class="message has-warning hidden"></div>
           </td>
           <td>
             <div class="child-actions">
               <a href="" class="edit hidden btn btn-default" target="_blank">Edit</a>
               <a class="btn btn-danger btn-remove-row hidden">Remove</a>
               <a class="btn btn-primary btn-add-row">Add</a>
             </div>
           </td>
         </tr>
       </tbody>
  </table>
</div>
